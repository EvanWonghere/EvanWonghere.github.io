<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="这是为我所在的实验室而准备的代码风格指南~"><title>PEP8 和 PEP257 中文翻译版</title><link rel=canonical href=https://yufenghuang.tech/p/pep8-%E5%92%8C-pep257-%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E7%89%88/><link rel=stylesheet href=/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css><meta property='og:title' content="PEP8 和 PEP257 中文翻译版"><meta property='og:description' content="这是为我所在的实验室而准备的代码风格指南~"><meta property='og:url' content='https://yufenghuang.tech/p/pep8-%E5%92%8C-pep257-%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E7%89%88/'><meta property='og:site_name' content='蜂窝'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Python'><meta property='article:published_time' content='2023-06-09T00:00:00+00:00'><meta property='article:modified_time' content='2023-06-09T00:00:00+00:00'><meta name=twitter:title content="PEP8 和 PEP257 中文翻译版"><meta name=twitter:description content="这是为我所在的实验室而准备的代码风格指南~"><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_789ebd951ab60789.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🐝</span></figure><div class=site-meta><h1 class=site-name><a href=/>蜂窝</a></h1><h2 class=site-description>EvanWong的个人博客</h2></div></header><ol class=menu-social><li><a href=https://github.com/EvanWonghere/EvanWonghere.github.io target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://steamcommunity.com/profiles/76561198980535015/ target=_blank title=Steam rel=me><svg role="img" viewBox="0 0 24 24"><title>Steam</title><path d="M11.979.0C5.678.0.511 4.86.022 11.037l6.432 2.658c.545-.371 1.203-.59 1.912-.59.063.0.125.004.188.006l2.861-4.142V8.91c0-2.495 2.028-4.524 4.524-4.524 2.494.0 4.524 2.031 4.524 4.527s-2.03 4.525-4.524 4.525h-.105l-4.076 2.911c0 .052.004.105.004.159.0 1.875-1.515 3.396-3.39 3.396-1.635.0-3.016-1.173-3.331-2.727L.436 15.27C1.862 20.307 6.486 24 11.979 24c6.627.0 11.999-5.373 11.999-12S18.605.0 11.979.0zM7.54 18.21l-1.473-.61c.262.543.714.999 1.314 1.25 1.297.539 2.793-.076 3.332-1.375.263-.63.264-1.319.005-1.949s-.75-1.121-1.377-1.383c-.624-.26-1.29-.249-1.878-.03l1.523.63c.956.4 1.409 1.5 1.009 2.455-.397.957-1.497 1.41-2.454 1.012H7.54zm11.415-9.303c0-1.662-1.353-3.015-3.015-3.015-1.665.0-3.015 1.353-3.015 3.015.0 1.665 1.35 3.015 3.015 3.015 1.663.0 3.015-1.35 3.015-3.015zm-5.273-.005c0-1.252 1.013-2.266 2.265-2.266 1.249.0 2.266 1.014 2.266 2.266.0 1.251-1.017 2.265-2.266 2.265-1.253.0-2.265-1.014-2.265-2.265z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>主页</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>归档</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>关于</span></a></li><li><a href=/quotes/><svg fill="#000" width="800" height="800" viewBox="-6 0 32 32"><title>quote-right</title><path d="M3.44 22.8c-.32.0-.64-.2-.76-.52-.16-.44.04-.92.48-1.08 3.4-1.36 4.12-4.28 4.12-6.48.0-2.52-1.4-3.84-2.8-3.84-1.28.0-2.8.6-2.8 2.28.0.68.36 1.32.96 1.72.48.28 1.04.36 1.44.12.4-.2.92-.04 1.12.36s.04.92-.36 1.12c-.96.48-2.12.4-3.08-.2-1.12-.68-1.76-1.84-1.76-3.12.0-2.32 1.84-3.96 4.48-3.96 2.16.0 4.48 1.92 4.48 5.52.0 3.84-1.84 6.68-5.2 8.04-.08.0-.2.04-.32.04zM14 22.8c-.32.0-.64-.2-.76-.52-.16-.44.04-.92.48-1.08 3.4-1.36 4.12-4.28 4.12-6.48.0-2.52-1.4-3.84-2.8-3.84-1.28.0-2.8.6-2.8 2.28.0.68.36 1.32.96 1.72.48.28 1.04.36 1.44.12.4-.2.92-.04 1.12.36s.04.92-.36 1.12c-.96.48-2.12.4-3.08-.2-1.08-.68-1.76-1.84-1.76-3.12.0-2.32 1.84-3.96 4.48-3.96 2.16.0 4.48 1.92 4.48 5.52.0 3.84-1.84 6.68-5.2 8.04-.12.0-.24.04-.32.04z"/></svg>
<span>采撷集</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>搜索</span></a></li><li><a href=/games/><!doctype html><svg height="800" width="800" id="_x32_" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"><style>.st0{fill:#000}</style><g><path class="st0" d="M511.27 331.566c0-.009.0-.018.0-.026-.008-.052.0-.087-.008-.14h-.009c-6.682-88.65-27.159-154.403-55.948-198.846-14.412-22.221-30.968-39.115-49.041-50.507-18.048-11.401-37.649-17.198-57.388-17.18-14.551-.009-26.985 2.629-37.527 6.611-15.836 5.97-27.358 14.795-36.364 21.319-4.495 3.28-8.373 5.961-11.549 7.592-3.211 1.658-5.475 2.239-7.436 2.239-1.328-.009-2.725-.251-4.521-.92-3.115-1.137-7.288-3.732-12.278-7.332-7.531-5.354-16.885-12.764-29.223-18.846-12.339-6.092-27.766-10.69-46.855-10.664-19.739-.018-39.34 5.787-57.388 17.18-27.115 17.119-50.794 46.481-69.008 87.887C18.542 211.332 5.743 264.92.746 331.401H.738c-.009.052.0.096-.009.14.0.008.0.017.0.026C.243 336.981.0 342.247.0 347.358c-.009 25.058 5.77 46.455 16.651 63.141 10.846 16.694 26.863 28.347 45.614 33.822 6.43 1.892 13.068 2.811 19.757 2.811 19.445-.026 39.046-7.618 57.692-20.764 18.681-13.189 36.598-32.052 52.91-55.731 7.845-11.427 18.5-24.798 29.987-34.854 5.736-5.032 11.662-9.214 17.362-12.026 5.71-2.82 11.09-4.244 16.027-4.235 4.936-.009 10.317 1.414 16.026 4.235 8.555 4.199 17.588 11.558 25.787 20.112 8.226 8.538 15.67 18.196 21.562 26.76 16.312 23.688 34.23 42.55 52.902 55.739 18.655 13.146 38.255 20.738 57.7 20.764 6.69.0 13.328-.92 19.749-2.811 18.759-5.475 34.776-17.128 45.614-33.822C506.221 393.813 512 372.416 512 347.358 512 342.256 511.757 336.981 511.27 331.566zM476.737 398.36c-8.104 12.356-19.236 20.469-33.284 24.651-4.33 1.275-8.807 1.9-13.475 1.908-13.484.026-28.902-5.414-44.894-16.703-15.974-11.254-32.312-28.225-47.418-50.177-8.564-12.417-20.044-27.012-33.64-38.95-6.812-5.97-14.169-11.297-22.16-15.245-7.975-3.94-16.677-6.534-25.866-6.534-9.189.0-17.892 2.594-25.866 6.534-11.974 5.943-22.577 14.906-31.957 24.616-9.353 9.726-17.432 20.268-23.843 29.579-15.106 21.952-31.454 38.923-47.419 50.177-15.991 11.288-31.418 16.729-44.894 16.703-4.677-.009-9.145-.633-13.484-1.908-14.04-4.182-25.172-12.295-33.284-24.651-8.06-12.364-13.04-29.293-13.04-51.002.0-4.451.208-9.111.65-13.961v-.052l.009-.113c6.429-86.17 26.446-148.582 52.451-188.59 12.989-20.026 27.41-34.447 42.256-43.801 14.872-9.353 30.126-13.744 45.544-13.761 11.896.009 21.424 2.091 29.675 5.189 12.356 4.65 21.883 11.756 31.158 18.507 4.652 3.367 9.233 6.655 14.378 9.336 5.111 2.655 11.028 4.729 17.666 4.729 4.399.0 8.556-.928 12.286-2.325 6.56-2.482 12-6.213 17.422-10.065 8.113-5.831 16.208-12.14 26.091-16.981 9.883-4.833 21.449-8.364 37.076-8.39 15.418.017 30.672 4.408 45.545 13.761 22.264 14.005 43.6 39.532 60.511 78.03 16.92 38.464 29.354 89.735 34.195 154.36v.052l.009.113c.434 4.842.652 9.502.652 13.961C489.778 369.067 484.806 386.004 476.737 398.36z"/><polygon class="st0" points="161.232,178.126 122.29,178.126 122.29,213.631 86.785,213.631 86.785,252.573 122.29,252.573 122.29,288.079 161.232,288.079 161.232,252.573 196.737,252.573 196.737,213.631 161.232,213.631"/><path class="st0" d="M368.659 167.002c-11.331.0-20.52 9.189-20.52 20.538.0 11.341 9.189 20.538 20.52 20.538 11.35.0 20.538-9.197 20.538-20.538.0-11.349-9.18900000000002-20.538-20.538-20.538z"/><path class="st0" d="M368.659 266.247c-11.331.0-20.52 9.189-20.52 20.53.0 11.349 9.189 20.538 20.52 20.538 11.35.0 20.538-9.189 20.538-20.538C389.197 275.436 380.008 266.247 368.659 266.247z"/><path class="st0" d="M418.282 216.633c-11.341.0-20.538 9.189-20.538 20.53.0 11.349 9.197 20.529 20.538 20.529 11.35.0 20.538-9.18 20.538-20.529.0-11.341-9.18900000000002-20.53-20.538-20.53z"/><path class="st0" d="M319.054 216.633c-11.349.0-20.538 9.189-20.538 20.53.0 11.349 9.189 20.529 20.538 20.529 11.341.0 20.539-9.18 20.539-20.529C339.592 225.822 330.394 216.633 319.054 216.633z"/></g></svg>
<span>游戏厅</span></a></li><li><a href><span>games</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://yufenghuang.tech/en/>English</option><option value=https://yufenghuang.tech/ selected>中文</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#说在前面>说在前面</a></li><li><a href=#代码布局>代码布局</a><ol><li><a href=#缩进>缩进</a></li><li><a href=#制表符tab还是空格>制表符（$Tab$）还是空格？</a></li><li><a href=#最大行长度>最大行长度</a></li><li><a href=#二元运算符处的换行>二元运算符处的换行</a></li><li><a href=#空行>空行</a></li><li><a href=#源文件编码>源文件编码</a></li><li><a href=#import>$import$</a></li><li><a href=#模块级别-dunder-名称>模块级别 Dunder 名称</a></li></ol></li><li><a href=#字符串引号>字符串引号</a></li><li><a href=#表达式和语句中的空格>表达式和语句中的空格</a><ol><li><a href=#pet-hspace05em-peeves>$Pet \hspace{0.5em} Peeves$</a></li><li><a href=#其他建议>其他建议</a></li></ol></li><li><a href=#何时使用-trailing-hspace05em-commas>何时使用 $Trailing \hspace{0.5em} Commas$</a></li><li><a href=#注释>注释</a><ol><li><a href=#块注释>块注释</a></li><li><a href=#行注释>行注释</a></li><li><a href=#documentaton-hspace05em-strings>$Documentaton \hspace{0.5em} Strings$</a><ol><li><a href=#单行-docstring>单行 $docstring$</a></li><li><a href=#多行-docstring>多行 $docstring$</a></li></ol></li></ol></li><li><a href=#命名约定>命名约定</a><ol><li><a href=#首要原则>首要原则</a></li><li><a href=#描述性命名风格>描述性：命名风格</a></li><li><a href=#规范命名约定>规范：命名约定</a><ol><li><a href=#应避免的命名>应避免的命名</a></li><li><a href=#包名和模块名>包名和模块名</a></li><li><a href=#类名>类名</a></li><li><a href=#类型变量名>类型变量名</a></li><li><a href=#异常名>异常名</a></li><li><a href=#全局变量名>全局变量名</a></li><li><a href=#函数和变量名>函数和变量名</a></li><li><a href=#函数和方法的参数>函数和方法的参数</a></li><li><a href=#方法名与实例变量>方法名与实例变量</a></li><li><a href=#常量>常量</a></li><li><a href=#继承的设计>继承的设计</a></li><li><a href=#公共接口和内部接口>公共接口和内部接口</a></li></ol></li></ol></li><li><a href=#编程建议>编程建议</a><ol><li><a href=#函数注解>函数注解</a></li><li><a href=#类型注解>类型注解</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/p/pep8-%E5%92%8C-pep257-%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E7%89%88/>PEP8 和 PEP257 中文翻译版</a></h2><h3 class=article-subtitle>这是为我所在的实验室而准备的代码风格指南~</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jun 09, 2023</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 19 分钟</time></div></footer></div></header><section class=article-content><h1 id=pep8-和-pep257-中文翻译版>PEP8 和 PEP257 中文翻译版</h1><h2 id=说在前面>说在前面</h2><p>这是为我所在的实验室而准备的代码风格指南~</p><p>本代码风格指南此版本基本完全基于 $PEP8$、$PEP257$，未涉及部分都以其为准。</p><p>本代码风格指南默认为 $Python3$，对 $Python2$ 若有差异则会特殊声明。</p><h2 id=代码布局>代码布局</h2><h3 id=缩进>缩进</h3><p>每级缩进为 $4$ 个空格</p><ul><li><p>续行缩进有两种方式：括号内隐式垂直对齐或者悬挂缩进。</p><p>在使用悬挂缩进时，第一行不应该有参数，且应该用进一步的缩进来明确区分自己是续行。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 正确:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 括号隐式对齐</span>
</span></span><span class=line><span class=cl><span class=n>foo</span> <span class=o>=</span> <span class=n>long_function_name</span><span class=p>(</span><span class=n>var_one</span><span class=p>,</span> <span class=n>var_two</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>var_three</span><span class=p>,</span> <span class=n>var_four</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 进一步缩进以区分</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>long_function_name</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>var_one</span><span class=p>,</span> <span class=n>var_two</span><span class=p>,</span> <span class=n>var_three</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>var_four</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>var_one</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 悬挂缩进</span>
</span></span><span class=line><span class=cl><span class=n>foo</span> <span class=o>=</span> <span class=n>long_function_name</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>var_one</span><span class=p>,</span> <span class=n>var_two</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>var_three</span><span class=p>,</span> <span class=n>var_four</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 错误:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 第一行有参数时应该使用括号内隐式对齐</span>
</span></span><span class=line><span class=cl><span class=n>foo</span> <span class=o>=</span> <span class=n>long_function_name</span><span class=p>(</span><span class=n>var_one</span><span class=p>,</span> <span class=n>var_two</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>var_three</span><span class=p>,</span> <span class=n>var_four</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 悬挂缩进需要进一步缩进以区分</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>long_function_name</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>var_one</span><span class=p>,</span> <span class=n>var_two</span><span class=p>,</span> <span class=n>var_three</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>var_four</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>var_one</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>对于悬挂缩进，$4$ 空格缩进规则是可选的</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 悬挂缩进并不一定要 4 个空格</span>
</span></span><span class=line><span class=cl><span class=n>foo</span> <span class=o>=</span> <span class=n>long_function_name</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=n>var_one</span><span class=p>,</span> <span class=n>var_two</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>var_three</span><span class=p>,</span> <span class=n>var_four</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>当 $if$ 语句的条件部分长到需要分行书写时，有多种规范可选</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 不额外缩进</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>this_is_one_thing</span> <span class=ow>and</span>
</span></span><span class=line><span class=cl>    <span class=n>that_is_another_thing</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>do_something</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用注释区分</span>
</span></span><span class=line><span class=cl><span class=c1># 支持语法高亮</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>this_is_one_thing</span> <span class=ow>and</span>
</span></span><span class=line><span class=cl>    <span class=n>that_is_another_thing</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># 如果条件都为真，那么我们可以 frobnicate</span>
</span></span><span class=line><span class=cl>    <span class=n>do_something</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 续行增加额外缩进</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>this_is_one_thing</span>
</span></span><span class=line><span class=cl>        <span class=ow>and</span> <span class=n>that_is_another_thing</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>do_something</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>多行结构的结尾小括号/中括号/花括号可以放在一行的开头，也可以进行缩进</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>my_list</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>some_function_that_takes_arguments</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;b&#39;</span><span class=p>,</span> <span class=s1>&#39;c&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;d&#39;</span><span class=p>,</span> <span class=s1>&#39;e&#39;</span><span class=p>,</span> <span class=s1>&#39;f&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>my_list</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>some_function_that_takes_arguments</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;b&#39;</span><span class=p>,</span> <span class=s1>&#39;c&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;d&#39;</span><span class=p>,</span> <span class=s1>&#39;e&#39;</span><span class=p>,</span> <span class=s1>&#39;f&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h3 id=制表符tab还是空格>制表符（$Tab$）还是空格？</h3><p>空格是推荐的缩进方式，除非原项目使用 $Tab$ 否则不应该使用。</p><p>禁止空格与 $Tab$ 混用。</p><p>但如今市面上大多数 $IDE$ 会将 $Tab$ 替换成 $4$ 个空格，使用时需注意即可。</p><h3 id=最大行长度>最大行长度</h3><p>所有行不应该超过 79 个字符。</p><p>对于结果限制较少的流长文本块（$docstring$ 或注释），行长应限制在 72 个字符。</p><p>包装长行的首选方式是使用括号自带的隐含续行符。</p><p>通过用括号包装表达式，可以将长行分成多行。应优先使用这些括号，而不是使用反斜线续行。</p><p>有时仍需使用反斜杠，比如在 $Python 3.10$ 之前，多重 <code>with-statements</code> 长语句不能使用隐式续码，因此在这种情况下可以使用反斜线：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;/path/to/some/file/you/want/to/read&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>file_1</span><span class=p>,</span> \
</span></span><span class=line><span class=cl>     <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;/path/to/some/file/being/written&#39;</span><span class=p>,</span> <span class=s1>&#39;w&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>file_2</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>file_2</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>file_1</span><span class=o>.</span><span class=n>read</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><p>除此之外还有断言语句 $assert$。</p><h3 id=二元运算符处的换行>二元运算符处的换行</h3><p>在二元运算符之前换行</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 错误:</span>
</span></span><span class=line><span class=cl><span class=c1># 操作符离操作数太远了</span>
</span></span><span class=line><span class=cl><span class=n>income</span> <span class=o>=</span> <span class=p>(</span><span class=n>gross_wages</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>          <span class=n>taxable_interest</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>          <span class=p>(</span><span class=n>dividends</span> <span class=o>-</span> <span class=n>qualified_dividends</span><span class=p>)</span> <span class=o>-</span>
</span></span><span class=line><span class=cl>          <span class=n>ira_deduction</span> <span class=o>-</span>
</span></span><span class=line><span class=cl>          <span class=n>student_loan_interest</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 正确:</span>
</span></span><span class=line><span class=cl><span class=c1># 操作符与操作数很容易匹配起来</span>
</span></span><span class=line><span class=cl><span class=n>income</span> <span class=o>=</span> <span class=p>(</span><span class=n>gross_wages</span>
</span></span><span class=line><span class=cl>          <span class=o>+</span> <span class=n>taxable_interest</span>
</span></span><span class=line><span class=cl>          <span class=o>+</span> <span class=p>(</span><span class=n>dividends</span> <span class=o>-</span> <span class=n>qualified_dividends</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=o>-</span> <span class=n>ira_deduction</span>
</span></span><span class=line><span class=cl>          <span class=o>-</span> <span class=n>student_loan_interest</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=空行>空行</h3><ul><li>用两行空行将顶级函数和类的定义围起来</li><li>类内方法定义用一个空行包围</li><li>可少量使用额外空行来分割函数组</li><li>在函数中使用少量空行指示逻辑部分</li><li>总而言之，空行的作用就是使代码结构层次分明</li></ul><h3 id=源文件编码>源文件编码</h3><p>$Python 2$ 默认 $ASCII$，$Python 3$ 默认 $UTF-8$。</p><p>对于 $Python3$ 无需指明代码，对于 $Python2$ 需指定编码格式为 $UTF-8$，</p><p>需要在文件顶端插入</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># -*- coding: UTF-8 -*-</span>
</span></span></code></pre></td></tr></table></div></div><p>或者</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># coding=utf-8</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=import>$import$</h3><ul><li><p>应该单行 $import$</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 正确:</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 错误:</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span><span class=o>,</span> <span class=nn>os</span>
</span></span></code></pre></td></tr></table></div></div><p>但对于 <code>from-import</code> 则可以单行</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 正确:</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>subprocess</span> <span class=kn>import</span> <span class=n>Popen</span><span class=p>,</span> <span class=n>PIPE</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>$import$ 应该放在文件的顶部，在模块注释和 $docstring$ 之后，在模块全局和常量之前</p></li><li><p>$import$ 应该遵循以下顺序分组</p><ol><li>标准库 $import$</li><li>相关第三方库 $import$</li><li>本地应用/库 $import$</li></ol><p>每组之间应该用一行空格分隔。</p></li><li><p>推荐使用绝对导入，因为它们通常更具可读性，而且在导入系统配置不正确的情况下（如软件包内的目录最终出现在 <code>sys.path</code>），往往会表现得更好（或至少给出更好的错误信息）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>mypkg.sibling</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>mypkg</span> <span class=kn>import</span> <span class=n>sibling</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>mypkg.sibling</span> <span class=kn>import</span> <span class=n>example</span>
</span></span></code></pre></td></tr></table></div></div><p><em><strong>但应该避免复杂的布局并总是使用绝对导入</strong></em></p><p>当从模块中导入类时，应该</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>myclass</span> <span class=kn>import</span> <span class=n>MyClass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>foo.bar.yourclass</span> <span class=kn>import</span> <span class=n>YourClass</span>
</span></span></code></pre></td></tr></table></div></div><p>如果这样导致与本地命名冲突，则应该</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>myclass</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>foo.bar.yourclass</span>
</span></span></code></pre></td></tr></table></div></div><p>并且使用 <code>myclass.MyClass</code>和<code>foo.bar.yourclass.YourClass</code></p></li><li><p>避免使用通配符导入，就像避免使用 <code>using namespace</code> 那样</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 避免使用</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=o>&lt;</span><span class=n>module</span><span class=o>&gt;</span> <span class=kn>import</span> <span class=o>*</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h3 id=模块级别-dunder-名称>模块级别 Dunder 名称</h3><p>模块级别"$dunders$"（被两对下划线包裹的名称）应该被放在模块的 $docstring$ 和其他所有 $import$ 前，除了$ from \hspace{0.5em} __future__ \hspace{0.5em} import $，$Python$强制规定 <code>future-imports</code> 必须出现在除了 $docstring$ 外所有代码之前。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;This is the example module.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>This module does stuff.
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>__future__</span> <span class=kn>import</span> <span class=n>barry_as_FLUFL</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>__all__</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;b&#39;</span><span class=p>,</span> <span class=s1>&#39;c&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>__version__</span> <span class=o>=</span> <span class=s1>&#39;0.1&#39;</span>
</span></span><span class=line><span class=cl><span class=n>__author__</span> <span class=o>=</span> <span class=s1>&#39;Cardinal Biggles&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=字符串引号>字符串引号</h2><p>在 Python 中，单引号字符串和双引号字符串是一样的。但是，当字符串包含单引号和双引号字符时，使用另一种引号以避免字符串中出现反斜线。这样可以提高可读性。</p><p>对于三重引号字符串，应始终使用双引号字符。</p><h2 id=表达式和语句中的空格>表达式和语句中的空格</h2><h3 id=pet-hspace05em-peeves>$Pet \hspace{0.5em} Peeves$</h3><p>以下情况中避免使用多余的空格：</p><ul><li><p>紧靠圆括号<code>()</code>、方括号<code>[]</code>、花括号<code>{}</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=n>spam</span><span class=p>(</span><span class=n>ham</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=p>{</span><span class=n>eggs</span><span class=p>:</span> <span class=mi>2</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=n>spam</span><span class=p>(</span> <span class=n>ham</span><span class=p>[</span> <span class=mi>1</span> <span class=p>],</span> <span class=p>{</span> <span class=n>eggs</span><span class=p>:</span> <span class=mi>2</span> <span class=p>}</span> <span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>括号与逗号之间</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=n>foo</span> <span class=o>=</span> <span class=p>(</span><span class=mi>0</span><span class=p>,)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=n>bar</span> <span class=o>=</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>逗号<code>,</code>、分号<code>;</code>、冒号<code>:</code>前</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>x</span> <span class=o>==</span> <span class=mi>4</span><span class=p>:</span> <span class=nb>print</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>);</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=n>y</span><span class=p>,</span> <span class=n>x</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>x</span> <span class=o>==</span> <span class=mi>4</span> <span class=p>:</span> <span class=nb>print</span><span class=p>(</span><span class=n>x</span> <span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=p>;</span> <span class=n>x</span> <span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=n>y</span> <span class=p>,</span> <span class=n>x</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>例外的是，在切片中，冒号的作用类似于二进制运算符，两边的数量应该相等（将其视为优先级最低的运算符）。在扩展切片中，两个冒号必须有相同的间距。例外：当省略片段参数时，空格也会被省略：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=n>ham</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>9</span><span class=p>],</span> <span class=n>ham</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>9</span><span class=p>:</span><span class=mi>3</span><span class=p>],</span> <span class=n>ham</span><span class=p>[:</span><span class=mi>9</span><span class=p>:</span><span class=mi>3</span><span class=p>],</span> <span class=n>ham</span><span class=p>[</span><span class=mi>1</span><span class=p>::</span><span class=mi>3</span><span class=p>],</span> <span class=n>ham</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>9</span><span class=p>:]</span>
</span></span><span class=line><span class=cl><span class=n>ham</span><span class=p>[</span><span class=n>lower</span><span class=p>:</span><span class=n>upper</span><span class=p>],</span> <span class=n>ham</span><span class=p>[</span><span class=n>lower</span><span class=p>:</span><span class=n>upper</span><span class=p>:],</span> <span class=n>ham</span><span class=p>[</span><span class=n>lower</span><span class=p>::</span><span class=n>step</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>ham</span><span class=p>[</span><span class=n>lower</span><span class=o>+</span><span class=n>offset</span> <span class=p>:</span> <span class=n>upper</span><span class=o>+</span><span class=n>offset</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>ham</span><span class=p>[:</span> <span class=n>upper_fn</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=p>:</span> <span class=n>step_fn</span><span class=p>(</span><span class=n>x</span><span class=p>)],</span> <span class=n>ham</span><span class=p>[::</span> <span class=n>step_fn</span><span class=p>(</span><span class=n>x</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=n>ham</span><span class=p>[</span><span class=n>lower</span> <span class=o>+</span> <span class=n>offset</span> <span class=p>:</span> <span class=n>upper</span> <span class=o>+</span> <span class=n>offset</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=n>ham</span><span class=p>[</span><span class=n>lower</span> <span class=o>+</span> <span class=n>offset</span><span class=p>:</span><span class=n>upper</span> <span class=o>+</span> <span class=n>offset</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>ham</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span> <span class=mi>9</span><span class=p>],</span> <span class=n>ham</span><span class=p>[</span><span class=mi>1</span> <span class=p>:</span><span class=mi>9</span><span class=p>],</span> <span class=n>ham</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>9</span> <span class=p>:</span><span class=mi>3</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>ham</span><span class=p>[</span><span class=n>lower</span> <span class=p>:</span> <span class=p>:</span> <span class=n>step</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>ham</span><span class=p>[</span> <span class=p>:</span> <span class=n>upper</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>在函数调用的参数列表开头括号之前</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=n>spam</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=n>spam</span> <span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>开始索引的括号之前</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=n>dct</span><span class=p>[</span><span class=s1>&#39;key&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>lst</span><span class=p>[</span><span class=n>index</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=n>dct</span> <span class=p>[</span><span class=s1>&#39;key&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>lst</span> <span class=p>[</span><span class=n>index</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>赋值（或其他）运算符之前</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>y</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=n>long_variable</span> <span class=o>=</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=n>x</span>             <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>y</span>             <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=n>long_variable</span> <span class=o>=</span> <span class=mi>3</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h3 id=其他建议>其他建议</h3><ul><li><p>避免在任何地方出现 <code>trailing whitespace</code>，结尾不要有多余的空白。</p></li><li><p>这些二进制运算符的两边总是用一个空格包围：赋值 (<code>=</code>)、增强赋值 (<code>+=</code>, <code>-=</code> 等)、比较 (<code>==</code>, <code>&lt;</code>, <code>></code>, <code>!=</code>, <code>&lt;></code>, <code>&lt;=</code>, <code>>=</code>, <code>in</code>, <code>not in</code>, <code>is</code>, <code>is not</code>)、布尔运算 (<code>and</code>, <code>or</code>, <code>not</code>)。</p></li><li><p>如果使用不同优先级的运算符，可以考虑在优先级最低的运算符周围添加空格。不过，请自行判断，切勿使用一个以上的空格，而且二进制运算符两边的空格数量一定要相同：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=n>i</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>submitted</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>*</span><span class=mi>2</span> <span class=o>-</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>hypot2</span> <span class=o>=</span> <span class=n>x</span><span class=o>*</span><span class=n>x</span> <span class=o>+</span> <span class=n>y</span><span class=o>*</span><span class=n>y</span>
</span></span><span class=line><span class=cl><span class=n>c</span> <span class=o>=</span> <span class=p>(</span><span class=n>a</span><span class=o>+</span><span class=n>b</span><span class=p>)</span> <span class=o>*</span> <span class=p>(</span><span class=n>a</span><span class=o>-</span><span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=n>i</span><span class=o>=</span><span class=n>i</span><span class=o>+</span><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>submitted</span> <span class=o>+=</span><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=n>x</span> <span class=o>*</span> <span class=mi>2</span> <span class=o>-</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>hypot2</span> <span class=o>=</span> <span class=n>x</span> <span class=o>*</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span> <span class=o>*</span> <span class=n>y</span>
</span></span><span class=line><span class=cl><span class=n>c</span> <span class=o>=</span> <span class=p>(</span><span class=n>a</span> <span class=o>+</span> <span class=n>b</span><span class=p>)</span> <span class=o>*</span> <span class=p>(</span><span class=n>a</span> <span class=o>-</span> <span class=n>b</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>函数注释应使用正常的冒号规则，如果存在 <code>-></code> 箭头，则其周围必须有空格。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>munge</span><span class=p>(</span><span class=nb>input</span><span class=p>:</span> <span class=n>AnyStr</span><span class=p>):</span> <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>munge</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>PosInt</span><span class=p>:</span> <span class=o>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>munge</span><span class=p>(</span><span class=nb>input</span><span class=p>:</span><span class=n>AnyStr</span><span class=p>):</span> <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>munge</span><span class=p>()</span><span class=o>-&gt;</span><span class=n>PosInt</span><span class=p>:</span> <span class=o>...</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>当 <code>=</code> 符号用于表示关键字参数时，或用于表示未注明函数参数的默认值时，不要在其周围使用空格：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>complex</span><span class=p>(</span><span class=n>real</span><span class=p>,</span> <span class=n>imag</span><span class=o>=</span><span class=mf>0.0</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>magic</span><span class=p>(</span><span class=n>r</span><span class=o>=</span><span class=n>real</span><span class=p>,</span> <span class=n>i</span><span class=o>=</span><span class=n>imag</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>complex</span><span class=p>(</span><span class=n>real</span><span class=p>,</span> <span class=n>imag</span> <span class=o>=</span> <span class=mf>0.0</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>magic</span><span class=p>(</span><span class=n>r</span> <span class=o>=</span> <span class=n>real</span><span class=p>,</span> <span class=n>i</span> <span class=o>=</span> <span class=n>imag</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>不过，在将参数注释与默认值相结合时，请在 <code>=</code> 符号周围使用空格：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl> <span class=n>Correct</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>munge</span><span class=p>(</span><span class=n>sep</span><span class=p>:</span> <span class=n>AnyStr</span> <span class=o>=</span> <span class=kc>None</span><span class=p>):</span> <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>munge</span><span class=p>(</span><span class=nb>input</span><span class=p>:</span> <span class=n>AnyStr</span><span class=p>,</span> <span class=n>sep</span><span class=p>:</span> <span class=n>AnyStr</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=n>limit</span><span class=o>=</span><span class=mi>1000</span><span class=p>):</span> <span class=o>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>munge</span><span class=p>(</span><span class=nb>input</span><span class=p>:</span> <span class=n>AnyStr</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span> <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>munge</span><span class=p>(</span><span class=nb>input</span><span class=p>:</span> <span class=n>AnyStr</span><span class=p>,</span> <span class=n>limit</span> <span class=o>=</span> <span class=mi>1000</span><span class=p>):</span> <span class=o>...</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>不鼓励使用复合语句（一行多个语句）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>foo</span> <span class=o>==</span> <span class=s1>&#39;blah&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>do_blah_thing</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>do_one</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>do_two</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>do_three</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>foo</span> <span class=o>==</span> <span class=s1>&#39;blah&#39;</span><span class=p>:</span> <span class=n>do_blah_thing</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>do_one</span><span class=p>();</span> <span class=n>do_two</span><span class=p>();</span> <span class=n>do_three</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>有时候，如果 if/for/while 语句的主体很小，可以将它们放在同一行。但是，对于包含多个子句的语句，不应该这样做。应该避免将过长的行折叠成多行。</p><p>不要这样：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>foo</span> <span class=o>==</span> <span class=s1>&#39;blah&#39;</span><span class=p>:</span> <span class=n>do_blah_thing</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>lst</span><span class=p>:</span> <span class=n>total</span> <span class=o>+=</span> <span class=n>x</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=n>t</span> <span class=o>&lt;</span> <span class=mi>10</span><span class=p>:</span> <span class=n>t</span> <span class=o>=</span> <span class=n>delay</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p>绝对不要这样：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>foo</span> <span class=o>==</span> <span class=s1>&#39;blah&#39;</span><span class=p>:</span> <span class=n>do_blah_thing</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>:</span> <span class=n>do_non_blah_thing</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>try</span><span class=p>:</span> <span class=n>something</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>finally</span><span class=p>:</span> <span class=n>cleanup</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>do_one</span><span class=p>();</span> <span class=n>do_two</span><span class=p>();</span> <span class=n>do_three</span><span class=p>(</span><span class=n>long</span><span class=p>,</span> <span class=n>argument</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                             <span class=nb>list</span><span class=p>,</span> <span class=n>like</span><span class=p>,</span> <span class=n>this</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>foo</span> <span class=o>==</span> <span class=s1>&#39;blah&#39;</span><span class=p>:</span> <span class=n>one</span><span class=p>();</span> <span class=n>two</span><span class=p>();</span> <span class=n>three</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h2 id=何时使用-trailing-hspace05em-commas>何时使用 $Trailing \hspace{0.5em} Commas$</h2><p>$Trailing \hspace{0.5em} Commas$ 通常是可选的，但在组成一个元素的元组时，$Trailing \hspace{0.5em} Commas$ 是必须的。为了清晰起见，建议用括号（从技术上讲是多余的）将后者包围起来：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=n>FILES</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;setup.cfg&#39;</span><span class=p>,)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=n>FILES</span> <span class=o>=</span> <span class=s1>&#39;setup.cfg&#39;</span><span class=p>,</span>
</span></span></code></pre></td></tr></table></div></div><p>如果 $Trailing \hspace{0.5em} Commas$ 是多余的，那么在使用版本控制系统（如 $Git$）时，当预期值、参数或导入项的列表会随着时间的推移而扩展时，$Trailing \hspace{0.5em} Commas$ 通常会很有用。通常的做法是，将每个值（等）单独放在一行，始终加上一个 $Trailing \hspace{0.5em} Commas$，然后在下一行加上封闭括号/小括号/大括号。但是，将尾逗号与关闭分隔符放在同一行是不合理的（上述单元组的情况除外）：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=n>FILES</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;setup.cfg&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;tox.ini&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>initialize</span><span class=p>(</span><span class=n>FILES</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=n>error</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=p>)</span>
</span></span><span class=line><span class=cl>           
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=n>FILES</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;setup.cfg&#39;</span><span class=p>,</span> <span class=s1>&#39;tox.ini&#39;</span><span class=p>,]</span>
</span></span><span class=line><span class=cl><span class=n>initialize</span><span class=p>(</span><span class=n>FILES</span><span class=p>,</span> <span class=n>error</span><span class=o>=</span><span class=kc>True</span><span class=p>,)</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=注释>注释</h2><p>与代码相矛盾的注释比没有注释还要糟糕！当代码改变时总是先修改注释！</p><p>注释应该是完整的句子，以大写字母开头（除非是标识符）。</p><p>块注释通常由一或多段完整的句子构成，每个句子以句号结尾。</p><h3 id=块注释>块注释</h3><p>块注释通常适用于跟在它们后面的一些（或全部）代码，且与该代码有相同的缩进级别。块注释的每一行都以一个<code>#</code>和一个空格开始（除非它是注释内的缩进文本）。</p><p>块注释内的段落之间通过包含单个<code>#</code>的行进行分隔。</p><h3 id=行注释>行注释</h3><p>行内注释应该谨慎使用。</p><p>行内注释是在与语句相同的行上的注释。行内注释应至少与语句间隔两个空格。它们应以<code>#</code>和一个空格开始。</p><p>如果行内注释陈述的是显而易见的事情，那么它们就没有必要，甚至会分散注意力。不要这样：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=n>x</span> <span class=o>+</span> <span class=mi>1</span>                 <span class=c1># Increment x</span>
</span></span></code></pre></td></tr></table></div></div><p>但有时候这是有用的：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=n>x</span> <span class=o>+</span> <span class=mi>1</span>                 <span class=c1># Compensate for border</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=documentaton-hspace05em-strings>$Documentaton \hspace{0.5em} Strings$</h3><p>$docstring$ 是作为模块、函数、类或方法定义中第一条语句出现的字符串字面量。这样的 $docstring$ 将成为该对象的 $__doc__$ 特殊属性。</p><p>所有模块，以及模块导出的所有函数和类都应有$docstring$。</p><p>本指南不涉及 $attribute \hspace{0.5em} docstrings$ 和 $additional \hspace{0.5em} docstrings$，如有需要请参考<a class=link href=https://peps.python.org/pep-0258/ target=_blank rel=noopener>PEP 258</a>。</p><p>为保持一致，在 $docstring$ 周围使用<code>"""三重双引号"""</code>；如果要在 $docstring$ 中使用<code>\反斜线</code>，使用<code>r"""raw三重双引号"""</code>；如果是 $Unicode \hspace{0.5em} docstring$，使用 <code>u"""unicode三重双引号"""</code>。</p><h4 id=单行-docstring>单行 $docstring$</h4><p>单行 $docstring$ 适用于很简单很显然的情况</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>kos_root</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Return the pathname of the KOS root directory.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>global</span> <span class=n>_kos_root</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>_kos_root</span><span class=p>:</span> <span class=k>return</span> <span class=n>_kos_root</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span></code></pre></td></tr></table></div></div><p>需要注意：</p><ul><li><p>即使 $docstring$ 只需要一行，也应该使用<code>"""三重双引号"""</code>，方便日后拓展；</p></li><li><p>&ldquo;&ldquo;&ldquo;对于单行 $docstring$，三重双引号的开头和结尾应该在同一行&rdquo;&rdquo;&rdquo;</p></li><li><p>函数/方法的单行 $docstring$的前后都没有空行</p></li><li><p>应用祈使句的形式来规定函数或方法的效果（比如 <code>Do this</code>, <code>Return that</code>），而不是使用单纯的描述</p></li><li><p>单行 $docstring$ 不应该重申函数/方法的参数（可通过内省获得），<strong>不要这么做：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>function</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;function(a, b) -&gt; list&#34;&#34;&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>这种 $docstring$ 的最佳形式应该是：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>function</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Do X and return a list.&#34;&#34;&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>（<code>Do X</code> 应被替换为有用的描述）</p></li></ul><h4 id=多行-docstring>多行 $docstring$</h4><p>多行 $docstring$由摘要行（$summary \hspace{0.5em} line$）、空行和更详细的说明组成。摘要行可能会被自动索引工具使用；重要的是，摘要行必须在一行内，并用空行与文档字符串的其他部分隔开。摘要行可以与开头引号在同一行，也可以在下一行。整个文档字符串的缩进与第一行的引号相同。</p><p>在所有描述类的 $docstring$ 后插入一个空行，也就是说，类 $docstring$ 和第一个方法之间要有一行空行。</p><p>脚本/独立程序的 $docstrig$ 应作为其使用信息使用，当脚本/独立程序被调用时，如果出现参数错误/缺失或者使用了 <code>-h</code> 选项，该 $docstring$ 会被打印出来。该 $docstring$ 应记录有脚本/独立程序的功能、命令行语法、环境变量和文件。使用信息可以相当详尽，应足以让新用户正确使用命令，并为老用户提供所有选项和参数的完整快速参考。简单地说，脚本/独立程序的 $docstrig$ 应作为其使用指南来写。</p><p>模块的 $docstring$ 应该列出该模块导出的类、错误、方法以及任何其他对象，并对每个类、异常和函数给出一行摘要。(这些摘要所提供的细节通常少于对象的 $docstring$ 中的摘要行）。包的 $docstring$（包的 <code>__init__.py</code> 中的 $docstring$ ）应列出软件包导出的模块和子包。</p><p>函数或方法的 $docstring$ 应概述其行为，并记录其参数、返回值、副作用、异常情况以及调用时间限制（如适用）。应注明可选参数。应记录关键字参数是否是接口的一部分。</p><p>类的$docstring$应概述其行为，并列出公共方法和实例变量。如果该类打算被子类化（可被继承），并为子类提供了额外的接口，则应在文档中单独列出该接口。类的构造函数（<code>__init__</code> 方法）应该在其自身的文档字符串中进行说明。单个方法应由它们自己的 $docstring$ 记录。</p><p>如果一个类继承自另一个类，并且其行为大部分继承自基类，那么其$docstring$应该提及这一点，并总结其中的区别，同时正确使用 <code>override</code> 和 <code>extand</code>。</p><p><strong>不使用 $Emac$ 命名约定</strong>（不使用大写字母来表示函数或方法的参数）。Python 是区分大小写的，参数名可以用于关键字参数，所以文档字符串应该记录正确的参数名。在 $docstring$ 中，每个参数最好单独成行。例如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>complex</span><span class=p>(</span><span class=n>real</span><span class=o>=</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>imag</span><span class=o>=</span><span class=mf>0.0</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Form a complex number.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>    Keyword arguments:
</span></span></span><span class=line><span class=cl><span class=s2>    real -- the real part (default 0.0)
</span></span></span><span class=line><span class=cl><span class=s2>    imag -- the imaginary part (default 0.0)
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>imag</span> <span class=o>==</span> <span class=mf>0.0</span> <span class=ow>and</span> <span class=n>real</span> <span class=o>==</span> <span class=mf>0.0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>complex_zero</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span></code></pre></td></tr></table></div></div><p>除非整个文档字符串可以放在一行中，否则请将结尾引号单独放在一行中。这样，就可以使用 Emacs 的 fill-paragraph 命令。</p><h2 id=命名约定>命名约定</h2><h3 id=首要原则>首要原则</h3><p>对用户可见的 API 的公共部分的命名应遵循反映使用情况而非实现的约定。也就是说，根据 API 的用途和功能来命名而不是内部实现。</p><h3 id=描述性命名风格>描述性：命名风格</h3><p>常见的命名风格有：</p><ul><li><p><code>b</code> (单个小写字母)</p></li><li><p><code>B</code> (单个大写字母)</p></li><li><p><code>lowercase</code>（小写）</p></li><li><p><code>lower_case_with_underscores</code>（小写下划线）</p></li><li><p><code>UPPERCASE</code>（大写）</p></li><li><p><code>UPPER_CASE_WITH_UNDERSCORES</code>（大写下划线）</p></li><li><p><code>CapitalizedWords</code>（大驼峰命名法，用此命名风格使用缩略词时，缩略词的所有字母都要大写。因此，HTTPServerError 好于 HttpServerError。）</p></li><li><p><code>mixedCase</code>（小驼峰命名法）</p></li><li><p><code>Capitalized_Words_With_Underscores</code>（丑！）</p></li><li><p><code>_single_leading_underscore</code>（前缀单下划线）：弱 &ldquo;内部使用 &ldquo;指示符。例如，从 M import * 不能导入名称以下划线开头的对象。</p></li><li><p><code>single_trailing_underscore_</code>（后缀单下划线）：通常用于避免与关键字冲突，如</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>tkinter</span><span class=o>.</span><span class=n>Toplevel</span><span class=p>(</span><span class=n>master</span><span class=p>,</span> <span class=n>class_</span><span class=o>=</span><span class=s1>&#39;ClassName&#39;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><code>__double_leading_underscore</code>（前缀双下划线）：用于命名类属性，调用时这个命名会被改变（在类FooBar中，类属性 <code>__boo</code> 会变成 <code>_FooBar__boo</code>，详见下文）。</p></li><li><p><code>__double_leading_and_trailing_underscore__</code>（前后双下划线）：魔术对象或属性，存活于用户控制的命名空间内。比如 <code>__init__</code>，<code>__import__</code>，和 <code>__file__</code>。 <strong>永远不要</strong>自己起这样的命名。这些命名应仅在文档中使用。</p></li></ul><h3 id=规范命名约定>规范：命名约定</h3><h4 id=应避免的命名>应避免的命名</h4><p>永远不要使用小写字母 <code>l</code>（el）、大写字母 <code>O</code>（oh）、大写字母 <code>I</code>（eye）作为单字母变量名！！！</p><h4 id=包名和模块名>包名和模块名</h4><p>模块名应该是简短、全小写的名称，如果名称中是用下划线可以提高可读性，那么可以加入。</p><p>包名也应该是简短、全小写的名称，但是不鼓励使用下划线。</p><p>当 C/C++ 编写的扩展模块伴随一个提供更高级别接口的 $Python$ 模块时，$C/C++$ 模块命名应该以下划线开头(例如，<code>_socket</code>)。</p><h4 id=类名>类名</h4><p>类名应该使用大驼峰命名法（$CapWords$）。</p><p>如果类的接口主要是作为一个可调用的对象（主要调用 <code>__call__()</code>），那么该类的命名也可使用函数的命名规范，也就是全部小写、单词之间用下划线隔开。</p><h4 id=类型变量名>类型变量名</h4><p><em><strong>NOT READY</strong></em></p><h4 id=异常名>异常名</h4><p>因为异常一般是类，因此也适用类的命名规则。但是当异常是个错误时，则需要添加 <code>Error</code> 后缀.</p><h4 id=全局变量名>全局变量名</h4><p>（仅讨论只用于模块内部的全局变量）</p><p>其命名约定应与函数一致。</p><p>以 <code>from M import *</code> 的方式进行导入的模块应当使用 <code>__all__</code> 机制来防止导入全局变量。或者采用旧版的约定，给模块中的全局变量增加一个先导下划线（表示该变量是仅限于模块内部全局使用，是非公共的）。</p><h4 id=函数和变量名>函数和变量名</h4><p>函数名应该全小写，必要时是用下划线分割单词以提高可读性。</p><p>变量名与函数名遵守相同的命名约定。</p><p>除非项目本身使用的是小驼峰命名法，否则不使用。</p><h4 id=函数和方法的参数>函数和方法的参数</h4><p>实例的方法的第一个参数总应该是 <code>self</code>。</p><p>类的方法的第一个参数总是 <code>cls</code>。</p><p>如果函数参数的名称与关键字冲突，如前文所述，应在参数名称后面加一个下划线。</p><h4 id=方法名与实例变量>方法名与实例变量</h4><p>方法名与实例变量名称与函数命名规则一致即可。</p><p>使用前缀单下划线表示 <code>non-public</code> 的方法和实例变量。</p><p>如果为了避免和子类冲突，可以加前缀双下划线，这样在调用时会触发 $Python$ 的命名重整。</p><p>Python 中使用类名进行命名重整：如果 Foo 类有一个属性 <code>__a</code>，则调用时不能采用 <code>Foo.__a</code> 的形式（当然，如果硬要访问该属性，可以采用 <code>Foo._Foo__a</code> 的方式获取访问权）。一般来说，双前导下划线仅用于防止基类和子类的属性产生命名冲突。</p><h4 id=常量>常量</h4><p>常量通常在模块级别定义，名称使用全大写并使用下划线分割单词。</p><h4 id=继承的设计>继承的设计</h4><p>设计时考虑方法和属性应该是 <code>public</code> 还是 <code>non-public</code> 。如果不能确定就按 <code>non-public</code> 设计，因为 <code>non-public</code> 转<code>public</code> 会更简单些。</p><p>$Python$ 中并没有真正的 <code>private</code> 属性，我们只会说 <code>non-public</code>。</p><p>设计时要明确好哪些是 <code>public</code>，哪些是子类的，哪些是仅限于基类的。</p><p>据以上内容，给出以下指南：</p><ul><li><code>public</code> 属性不应该使用前缀下划线</li><li>如果 <code>public</code> 属性和关键字冲突，可添加后缀单下划线</li><li>对于简单的 <code>public</code> 数据属性，最好直接公开属性名。$Python$ 提供了一个很方便的东西：修饰器。这种情况下，可以使用 <code>@property</code> 来把函数实现隐藏在简单的公共属性后面<ul><li>尽量在实现功能是避免副作用，尽管缓存之类的副作用没什么大问题。</li><li>避免对计算开销大的操作使用 <code>property</code>，这个属性标记会让调用者误以为是开销（相对）较低的操作。</li></ul></li><li>如果你设计的类用于被继承，并且你希望一些属性不会被子类使用，可以在命名时采取双前缀下划线的方式。当该属性调用时会自动触发 Python 的命名重整，把类名放在属性名前面。这样即使我们无意中在子类使用了相同的名称，也可以避免属性名的冲突。<ul><li>需要注意命名重整只是简单地利用了类名，所以如果子类类名和基类类名仍相同时，还是会构成命名冲突。</li><li>命名重整会使某些使用，比如调试和使用 <code>__getattr__()</code> 不太方便。但有详细的文档说明和且很好手动操作。</li><li>不是所有人都喜欢命名重整，需要尝试平衡好避免命名冲突和被高级调用者调用这二者的需求。</li></ul></li></ul><h4 id=公共接口和内部接口>公共接口和内部接口</h4><p>只有公共接口才能保证向后兼容性。因此，用户能够清楚地区分公共和内部接口是很重要的。</p><p>有文档说明的接口被认为是公共的，除非文档明确声明它们是临时的或内部的，不受通常的向后兼容性保证的限制。所有没有文档说明的接口都应该被认为是内部的。</p><p>为了更好地支持自省，模块应该使用 <code>__all__</code> 属性来明确声明它们的公共API中的名字。将 <code>__all__</code> 设置为空列表表示该模块没有公共API。</p><p>即使 <code>__all__</code> 设置得恰当，内部接口（包，模块，类，函数，属性或其他名字）仍然应该以单个下划线作为前缀。</p><p>如果包含一个接口的命名空间（包，模块或类）被认为是内部的，那么该接口也被认为是内部的。</p><p>导入的名字应该始终被认为是实现细节。其他模块不应该依赖于对这些导入名字的间接访问，除非它们是包含模块的API的明确文档化的一部分，比如os.path或者一个包的 <code>__init__</code> 模块，它暴露了子模块的功能。</p><h2 id=编程建议>编程建议</h2><ul><li><p>代码的编写应该有利于其他 $Python$ 实现（PyPy, Jython, IronPython, Cython, Psyco 等等）。</p><ul><li>例如，不要依赖于$CPython$对 <code>a += b</code>或<code>a = a + b</code> 这样形式的字符串拼接语句的高效实现。这种优化即使在$CPython$中也是很脆弱的（只对某些类型有效），而且不是所有的Python实现都支持引用计数的。对于性能敏感的代码段，采用 <code>''.join()</code> 形式能保证在不同的Python实现中都可以在线性时间内完成字符串拼接。</li></ul></li><li><p>与单例比如 <code>None</code> 的比较，使用 <code>is</code> 或 <code>is not</code> 而不是等号和不等号</p><p>并且需要注意，当你的意思是 <code>if x is not None</code> 时，不要写 <code>if x</code>，这并不等价。</p></li><li><p>使用 <code>is not</code> 运算符而不是 <code>not .. is</code> ，即使在功能上是一致的，但是前者具有更好的可读性</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>foo</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=ow>not</span> <span class=n>foo</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>在实现富比较排序操作是，最好把六种比较操作全部实现（<code>__eq__</code>, <code>__ne__</code>, <code>__lt__</code>, <code>__le__</code>, <code>__gt__</code>, <code>__ge__</code>），而不是只依赖于某一种特定的比较操作。</p><p>为最小化工作，$Python$ 提供 <code>functools.total_ordering()</code> 装饰器，用于自动生成缺少的比较方法。</p><p>这么做是因为解释器有可能会调换参数的位置，比如把 <code>y > x</code> 替换为 <code>x &lt; y</code>。</p></li><li><p>总是使用 <code>def</code> 语句将 <code>lambda</code> 与标识符绑定而不是使用赋值语句。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>f</span><span class=p>(</span><span class=n>x</span><span class=p>):</span> <span class=k>return</span> <span class=mi>2</span><span class=o>*</span><span class=n>x</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=n>f</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=mi>2</span><span class=o>*</span><span class=n>x</span>
</span></span></code></pre></td></tr></table></div></div><p>第一种形式表示生成的函数对象的名称是 &ldquo;<code>f</code>"，而不是通用的&rdquo;<code>&lt;lambda></code>"。这对一般的回溯和字符串表示更有用。与显式 <code>def</code> 语句相比，赋值语句的使用消除了 lambda 表达式的唯一优点（即可以嵌入到更大的表达式中）。</p></li><li><p>从 <code>Exception</code> 类而不是 <code>BaseException</code> 类派生异常。从 BaseException 直接继承只适用于捕获异常几乎总是错误的异常。</p><p>根据捕获异常的代码可能需要的区别来设计异常层次，而不是异常发生的位置。力求以编程方式回答 &ldquo;出了什么问题？&ldquo;的问题，而不是仅仅说明 &ldquo;出现了一个问题&rdquo;。（可参阅<a class=link href=https://peps.python.org/pep-3151/ target=_blank rel=noopener>PEP 3151</a>）</p></li><li><p>应在不丢失原始回溯的情况下使用 <code>raise X from Y</code> 来表示显式替换。
在有意替换内部异常（使用 <code>raise X from None</code>）时，应确保相关细节被转移到新异常中（例如在将 <code>KeyError</code> 转换为 <code>AttributeError</code> 时保留属性名称，或在新异常消息中嵌入原始异常的文本）</p></li><li><p>捕获异常时，尽可能提及具体的异常，而不是使用简单的 <code>except:</code> 子句：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=kn>import</span> <span class=nn>platform_specific_module</span>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=ne>ImportError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>platform_specific_module</span> <span class=o>=</span> <span class=kc>None</span>
</span></span></code></pre></td></tr></table></div></div><p>空的 <code>except:</code> 子句将捕获 <code>SystemExit</code> 和 <code>KeyboardInterrupt</code> 异常，这将使 <code>Control-C</code> 中断程序变得更加困难，还会掩盖其他问题。如果想捕获所有提示程序错误的异常，使用 <code>except Exception</code>（空的 <code>except:</code> 子句相当于 <code>except BaseException:</code>）。</p><p>一个好的经验法则是将空 <code>except:</code> 子句的使用限制在以下两种情况中：</p><ol><li>如果 <code>exception handler</code> 将打印或 log 记录回溯，至少让用户知道错误发生了。</li><li>如果代码需要做一些清理工作，但又要用 <code>raise</code> 将异常向上传播。不过 <code>try...finally</code> 会是处理这种情况的更好方式。</li></ol></li><li><p>当捕获 $OS$ 错误时，最好使用 $Python 3.3$ 中引入的显式异常层次结构，而不是内省 <code>errno</code> 值。</p></li><li><p>对于所有的 <code>try/except</code> 子句，将 <code>try</code> 子句限制在所需代码量的绝对最小值，这样可以避免掩盖错误。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span> <span class=o>=</span> <span class=n>collection</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>key_not_found</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>handle_value</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># Too broad!</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>handle_value</span><span class=p>(</span><span class=n>collection</span><span class=p>[</span><span class=n>key</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># Will also catch KeyError raised by handle_value()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>key_not_found</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>当资源是代码中某一特定部分的本地资源时，应使用 <code>with</code> 语句来确保资源在使用后被及时可靠地清理。也可以使用 <code>try/finally</code> 语句。</p></li><li><p>上下文管理器除了获取和释放资源外，还应通过单独的函数或方法来调用：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>conn</span><span class=o>.</span><span class=n>begin_transaction</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>do_stuff_in_transaction</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>conn</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>do_stuff_in_transaction</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>后一个示例没有提供任何信息来说明 <code>__enter__</code> 和 <code>__exit__</code> 方法除了在事务结束后关闭连接外，还在做其他事情。在这种情况下，明确的信息非常重要。</p></li><li><p><code>return</code> 语句要一致。函数中的 <code>return</code> 语句要么就都返回表达式，要么就都不返回。如果都要返回表达式，但是没有返回值的 <code>return</code> 语句，应当 <code>return None</code>，并且在函数末尾（如果能抵达）也应该指明 <code>return</code> 语句。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>foo</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>x</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>bar</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>x</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>foo</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>x</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>bar</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>x</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>使用 <code>''.startswith()</code> 和 <code>''.endswith()</code> 来替代使用切片来检查前缀和后缀。这样更简洁，也更不容易出错。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>foo</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s1>&#39;bar&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>foo</span><span class=p>[:</span><span class=mi>3</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;bar&#39;</span><span class=p>:</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>对象类型比较应始终使用 <code>isinstance()</code> 而不是直接比较类型：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nb>type</span><span class=p>(</span><span class=n>obj</span><span class=p>)</span> <span class=ow>is</span> <span class=nb>type</span><span class=p>(</span><span class=mi>1</span><span class=p>):</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>对于序列（<code>str</code>, <code>List</code>, <code>Tuple</code>），利用空序列为 <code>False</code> 这一事实：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=ow>not</span> <span class=n>seq</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>seq</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>seq</span><span class=p>):</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=ow>not</span> <span class=nb>len</span><span class=p>(</span><span class=n>seq</span><span class=p>):</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>拒绝 <code>trailing whitespace</code></p></li><li><p>不要使用 <code>==</code> 将布尔值和 <code>True</code> 或 <code>False</code> 比较：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>greeting</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>greeting</span> <span class=o>==</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Worse:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>greeting</span> <span class=ow>is</span> <span class=kc>True</span><span class=p>:</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>不鼓励在 try&mldr;finally 的 finally 套件中使用流程控制语句 return/break/continue，因为这样会使流程控制语句跳转到 finally 套件之外。这是因为此类语句将隐式地取消通过 finally 套件传播的任何活动异常：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>foo</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=mi>1</span> <span class=o>/</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>42</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h3 id=函数注解>函数注解</h3><p>这部分很重要，但篇幅有限这里写不下了，详细请参阅 <a class=link href=https://peps.python.org/pep-0484/ target=_blank rel=noopener>PEP 484</a>。</p><h3 id=类型注解>类型注解</h3><p>这部分很重要，但篇幅有限只能写下一小部分，详细请参阅 <a class=link href=https://peps.python.org/pep-0526/ target=_blank rel=noopener>PEP 526</a> 和 <a class=link href=https://peps.python.org/pep-0484/ target=_blank rel=noopener>PEP 484</a>，但 $PEP \hspace{0.5em} 484$ 应是首选语法。</p><ul><li><p>模块级变量、类和实例变量以及局部变量的注解应在冒号后留一个空格，冒号前不需要空格。</p></li><li><p>如果右边有赋值，那么类型注解的两边各有一个空格</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Correct:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>code</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Point</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>coords</span><span class=p>:</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>int</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>label</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s1>&#39;&lt;unknown&gt;&#39;</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Wrong:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>code</span><span class=p>:</span><span class=nb>int</span>  <span class=c1># No space after colon</span>
</span></span><span class=line><span class=cl><span class=n>code</span> <span class=p>:</span> <span class=nb>int</span>  <span class=c1># Space before colon</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Test</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span><span class=p>:</span> <span class=nb>int</span><span class=o>=</span><span class=mi>0</span>  <span class=c1># No spaces around equality sign</span>
</span></span></code></pre></td></tr></table></div></div></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/python/>Python</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><script src=https://giscus.app/client.js data-repo=EvanWonghere/EvanWonghere.github.io data-repo-id=R_kgDOPzgwzg data-category=Announcements data-category-id=DIC_kwDOPzgwzs4Cvsti data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark_dimmed")}})()</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2026 EvanWong</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.31.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>